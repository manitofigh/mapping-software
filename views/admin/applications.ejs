<%- include('../partials/head') %>
<body>
  <%- include('../partials/header') %>
  <div class="container mx-auto mt-8">
    <h1 class="text-2xl mb-4">Driver Applications</h1>
    <% if (typeof approvalSuccessMessage != 'undefined') { %>
      <p class="bg-green-200 text-green-800 border-l-4 border-green-500 px-4 py-2"><%= approvalSuccessMessage %></p>
    <% } %>
    <% if (typeof approvalErrorMessage != 'undefined') { %>
      <p class="bg-red-200 text-red-800 border-l-4 border-red-500 px-4 py-2"><%= approvalErrorMessage %></p>
    <% } %>
    <% if (applications.length === 0) { %>
      <p>No pending applications.</p>
    <% } else { %>
      <table class="w-full border-collapse">
        <thead>
          <tr>
            <th class="border px-4 py-2">Name</th>
            <th class="border px-4 py-2">Email</th>
            <th class="border px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% applications.forEach((application) => { %>
            <tr>
              <td class="border px-4 py-2"><%= application.name %></td>
              <td class="border px-4 py-2"><%= application.email %></td>
              <td class="border px-4 py-2">
                <form action="/admin/applications/<%= application.id %>/approve" method="POST" class="inline">
                  <button type="submit" class="bg-green-500 text-white rounded px-4 py-2">Approve</button>
                </form>
                <form action="/admin/applications/<%= application.id %>/reject" method="POST" class="inline ml-2">
                  <button type="submit" class="bg-red-500 text-white rounded px-4 py-2">Reject</button>
                </form>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </div>
</body>